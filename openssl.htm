<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>on OpenSSL - wiki1.mikf.pl</title>
  </head>
  <body>
    <h1>OpenSSL</h1>
    <h2>the recognized way to download host's certificate</h2>
    <p><code>&lt; /dev/null openssl s_client -showcerts [-starttls imap]
        -connect </code><var>address:port</var> <code>2&gt;&amp;1 |<br>
        sed -ne '/-BEGIN CERFIFICATE-/,/-END CERTIFICATE-/p' &gt; </code><var>filename</var><code>.pem</code></p>
    <code></code>
    <p>alternatively, the sed can be</p>
    <p><code><tt>sed -ne '/^Certificate
          chain\r\?$/,/^---\r\?$/{/^-----BEGIN
          CERTIFICATE-----\r\?$/,/^-----END CERTIFICATE-----\r\?$/p}'</tt></code></p>
    <p><code></code>i also had a draft gawk thing that doesn't yet work</p>
    <p><strike><code>gawk --lint -v file=0 -v RS=$'\r\n' -v sta='^-----'
          -v fin=' CERTIFICATE-----$' '$0 ~ (sta "END" fin) { ++file }
          $0 ~ (sta "BEGIN" fin),$0 ~ (sta "END" fin) { print $0
          &gt;&gt; ("folename." file ".pem")}'</code></strike><br>
    </p>
  </body>
</html>
